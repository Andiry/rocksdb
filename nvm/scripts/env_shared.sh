#!/usr/bin/env bash
KB=1024
MB=$((1024 * KB))
GB=$((1024 * MB))

#RBENCH_CMD_PREFIX="taskset -c 0-$(nproc)"
RBENCH_CMD_PREFIX=""
RBENCH_BIN="$HOME/git/rocksdb/db_bench"
RBENCH_NUM=544
#RBENCH_NUM=1091
#RBENCH_NUM=2182
#RBENCH_NUM=4000
#RBENCH_NUM=100000
RBENCH_VALUE_SIZE=$((1 * MB))
RBENCH_BLOCK_SIZE=$((64 * KB))
RBENCH_BLOOM_BITS=10
RBENCH_CACHE_SIZE=$((1 * MB))
RBENCH_RANDOM_ACCESS_MAX_BUFFER_SIZE=$((64 * MB))
RBENCH_WRITABLE_FILE_MAX_BUFFER_SIZE=$((64 * MB))
RBENCH_WRITE_BUFFER_SIZE=$((128 * MB))
RBENCH_TARGET_FILE_SIZE_MULTIPLIER=1
RBENCH_TARGET_FILE_SIZE_BASE=$((2 * GB))
RBENCH_MAX_BYTES_FOR_LEVEL_BASE=$((2 * GB))
RBENCH_CACHE_NUMSHARDBITS=4
RBENCH_COMPRESSION_RATIO=1
RBENCH_COMPRESSION_TYPE=snappy
RBENCH_DELETE_OBSOLETE_FILES_PERIOD_MICROS=300000000
RBENCH_DISABLE_SEEK_COMPACTION=1
RBENCH_DISABLE_WAL=1
RBENCH_LEVEL0_FILE_NUM_COMPACTION_TRIGGER=4
RBENCH_LEVEL0_SLOWDOWN_WRITES_TRIGGER=8
RBENCH_LEVEL0_STOP_WRITES_TRIGGER=12
RBENCH_MAX_BACKGROUND_COMPACTIONS=20
RBENCH_MAX_WRITE_BUFFER_NUMBER=3
RBENCH_MIN_LEVEL_TO_COMPRESS=2
RBENCH_MMAP_READ=0
RBENCH_NUM_LEVELS=6
RBENCH_OPEN_FILES=500000
RBENCH_STATISTICS=1
RBENCH_STATS_INTERVAL=100000
RBENCH_STATS_PER_INTERVAL=1
RBENCH_SYNC=0
RBENCH_THREADS=$(nproc)
RBENCH_VERIFY_CHECKSUM=1
